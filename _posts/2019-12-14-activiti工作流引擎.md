---
layout:     post
title:      Activiti工作流引擎
subtitle:   处理项目中的审批流程
date:       2019-12-14
author:     极客小祥
header-img: img/text/JAVA.jpg
catalog: true
tags: 
    - JAVA
---

# Activity
1. **作用**：项目中审批流程的定义。
2. **原理**：程序员通过流程定义语言预先定义好工作流程，通过API把流程图部署到数据库，API启动流程(比如请假)、API驱动流程一步步向下执行，最终结束.

#### 1、activiti数据库环境
* **act_id_\***: 引擎内部的**人员与组信息表**，一般不用，项目会有自己的
* **act_re_\***:**流程部署表,固定的数据**，一般不会变
* **act_ru_\***:流程**运行时数据表**，频繁变化，但是数据量很少。因为当流程结束后，清空
* **act_hi_\***:流程**历史信息表**，会比较大，**历史流程实例、历史任务、任务审批记录，审批附件表**
* **act_ge_\***:**二进制表**，也是流程部署相关的信息

#### 2、使用
* 建议在eclipse下使用
* eclipse安装：安装**[artifacts](https://github.com/JTXYH/JTXYH.github.io/releases/tag/1.5)**
    1. **assignee**：执行任务的单个人员，此处一般使用表达式
	2. **candidate users**:候选人列表，逗号分隔或使用表达式
	3. **排它网关exclusiveGateway**：记得写条件
* IDEA安装：在Plugins中搜索或使用离线安装**[actibpm](https://plugins.jetbrains.com/plugin/7429-actibpm/)**
    * *IDEA容易出现bug*

#### 3、核心对象
1. **ProcessEngine**：**入口对象**，相当于mybatis的SqlSession会话对象
2. **RepositoryService**：**管理流程定义**，用来部署流程，删除流程部署，查询流程部署
3. **RuntimeService**：**流程执行服务类**，启动流程，驱动流程向下执行
4. **TaskService**：**任务服务类**，获取个人待办等
5. **HistoryService**：**历史信息服务类**，查询流程历史信息，跟踪流程实例运行情况
6. **ProcessDefinition**：**流程定义对象**，可以获得资源文件
7. **ProcessInstance**：**流程实例对象**，当流程被启动后，对应有一条流程实例数据，一个流程实例下有多个任务