---
layout:     post                     # 使用的布局（不需要改）
title:      UDP和TCP                      # 标题 
subtitle:   程序员必备                # 副标题
date:       2018-12-25               # 时间
author:     JTX                      # 作者
header-img: img/text/18-12-25.jpeg         # 这篇文章标题背景图片
catalog: true                        # 是否归档
tags:                                # 标签
    - Python
---

## 1、端口

**端口号**：端口就好一个房子的门，是出入这间房子的必经之路

如果一个程序需要**收发网络数据**，那么就需要有这样的端口

在linux系统中，端口可以有**65536（2的16次方）个之多！**

既然有这么多，操作系统为了统一管理，所以进行了编号，这就是**端口号**

### 端口号

端口是通过端口号来标记的，端口号只有整数，范围是从**0到65535**

注意：**端口数不一样的linux系统不一样，还可以手动修改**

### 端口是怎样分配的

端口号不是随意使用的，而是按照一定的规定进行分配。

### 知名端口

> IIS（HTTP）：80 
> 
> SQLServer：1433 
> 
> Oracle：1521 
> 
> MySQL：3306 
> 
> FTP：21 
> 
> SSH：22 
> 
> Tomcat：8080

### 动态端口（Dynamic Ports）

动态端口的范围是从**1024到65535**

之所以称为动态端口，是因为它一般**不固定分配某种服务**，而是动态分配。

动态分配是指当一个系统程序或应用程序程序需要网络通信时，它向主机申请一个端口，主机从可用的端口号中分配一个供它使用。

**当这个程序关闭时，同时也就释放了所占用的端口号**

### 小总结

端口有什么用呢 ？ 我们知道，一台拥有IP地址的主机可以提供许多服务，比如
**HTTP（万维网服务）、FTP（文件传输）、SMTP（电子邮件）等**，
这些服务完全可以通过**1个IP地址来实现。**
那么，主机是怎样区分不同的网络服务呢？显然不能只靠IP地址，因为**IP地址与网络服务的关系是一对多的关系。**
实际上是通过**IP地址+端口号**来区分不同的服务的。 
需要注意的是，端口并不是一一对应的。比如你的电脑作为客户机访问一台WWW服务器时，WWW服务器使用**80**端口与你的电脑通信，但你的电脑则可能使用**3457**这样的端口。

## TCP介绍

1. TCP协议，传输控制协议（英语：Transmission Control Protocol，缩写为 TCP）是一种**面向连接的、可靠的、基于字节流的传输层通信协议，由IETF的RFC 793定义**。

2. TCP通信需要经过**创建连接、数据传送、终止连接**三个步骤。

3. TCP通信模型中，在通信开始之前，一定要先建立相关的链接，才能发送数据，类似于生活中，**打电话**

## TCP特点

1. 面向连接

通信双方必须先建立连接才能进行数据的传输，双方都必须为该连接分配必要的系统内核资源，以管理连接的状态和连接上的传输。

双方间的数据传输都可以通过这一个连接进行。

完成数据交换后，双方必须断开此连接，以释放系统资源。

这种连接是一对一的，**因此TCP不适用于广播的应用程序，基于广播的应用程序请使用UDP协议。**

2. 可靠传输

1、**TCP采用发送应答机制**

TCP发送的每个报文段都必须得到接收方的应答才认为这个TCP报文段传输成功

2、**超时重传**

发送端发出一个报文段之后就启动定时器，如果在定时时间内没有收到应答就重新发送这个报文段。

TCP为了保证不发生丢包，就给每个包一个序号，同时序号也保证了传送到接收端实体的包的按序接收。然后接收端实体对已成功收到的包发回一个相应的确认（ACK）；如果发送端实体在合理的往返时延（RTT）内未收到确认，那么对应的数据包就被假设为已丢失将会被进行重传。

3、**错误校验**

TCP用一个校验和函数来检验数据是否有错误；在发送和接收时都要计算校验和。

4、**流量控制和阻塞管理**

流量控制用来避免主机发送得过快而使接收方来不及完全收下。


## TCP三次握手四次挥手

![三次握手、四次挥手.png](https://i.loli.net/2018/12/25/5c22338547ebb.png)


